<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BudgetFlow | Snowball-стиль портфель</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="shell">
    <header class="hero">
        <div class="hero__content">
            <div class="brand">BudgetFlow<span>α</span></div>
            <h1>Твой личный Snowball: активы, дивиденды, интеграции</h1>
            <p class="hero__subtitle">
                Подключи счёт Т‑Инвестиций, получи калькулятор доходности, календарь дивидендов и живой мониторинг портфеля.
                Вводи ID пользователя и мы подтянем данные из REST API.
            </p>
            <form class="hero__controls" id="userPicker">
                <label>
                    <span>ID пользователя</span>
                    <input type="number" id="userIdInput" placeholder="Например, 1" min="1">
                </label>
                <button type="submit" class="btn primary">Загрузить</button>
                <button type="button" id="demoBtn" class="btn ghost">Демо</button>
            </form>
            <div class="hero__chips">
                <span class="chip">XIRR</span>
                <span class="chip">Дивиденды</span>
                <span class="chip">Структура портфеля</span>
                <span class="chip">Ребаланс</span>
            </div>
        </div>
        <div class="summary-grid" id="summaryGrid">
            <article class="summary-card">
                <p>Баланс</p>
                <strong id="balanceValue">—</strong>
            </article>
            <article class="summary-card">
                <p>Расходы в этом месяце</p>
                <strong id="monthlySpending">—</strong>
            </article>
                <article class="summary-card">
                <p>Активы в портфеле</p>
                <strong id="assetsCount">—</strong>
            </article>
            <article class="summary-card">
                <p>Ожидание дивидендов</p>
                <strong id="expectedDividends">—</strong>
            </article>
        </div>
    </header>

    <main class="grid">
        <section class="panel span-2">
            <header>
                <div>
                    <h2>Быстрый старт</h2>
                    <p>Регистрация, категории и транзакции в одном месте</p>
                </div>
            </header>
            <div class="split">
                <form id="registerForm" class="form-card">
                    <h3>Регистрация</h3>
                    <label>Имя<input name="username" required placeholder="investor"/></label>
                    <label>Email<input name="email" type="email" required placeholder="you@mail.com"/></label>
                    <label>Пароль<input name="password" type="password" required/></label>
                    <button class="btn primary full">Создать</button>
                    <p class="hint" id="registerResult"></p>
                </form>
                <div class="stack">
                    <form id="categoryForm" class="form-card compact">
                        <h3>Новая категория</h3>
                        <div class="grid-2">
                            <input name="name" placeholder="Название" required>
                            <select name="type" required>
                                <option value="EXPENSE">Расход</option>
                                <option value="INCOME">Доход</option>
                            </select>
                            <input name="icon" placeholder="Иконка или emoji">
                            <input name="color" type="color" value="#7c3aed">
                        </div>
                        <button class="btn secondary full">Сохранить категорию</button>
                    </form>
                    <form id="transactionForm" class="form-card compact">
                        <h3>Быстрая транзакция</h3>
                        <div class="grid-3">
                            <input name="amount" type="number" step="0.01" required placeholder="Сумма">
                            <select name="type" required>
                                <option value="EXPENSE">Расход</option>
                                <option value="INCOME">Доход</option>
                            </select>
                            <input name="categoryId" type="number" placeholder="ID категории" required>
                            <input name="description" placeholder="Описание">
                            <input name="date" type="datetime-local" required>
                        </div>
                        <button class="btn primary full">Добавить</button>
                    </form>
                </div>
            </div>
        </section>

        <section class="panel">
            <header>
                <h2>Транзакции</h2>
                <p>Последние движения по счёту</p>
            </header>
            <div id="transactionsList" class="timeline empty">Загружается…</div>
        </section>

        <section class="panel">
            <header>
                <h2>Категории</h2>
                <p>Фокус расходов и доходов</p>
            </header>
            <div id="categoriesList" class="badges empty">Загружается…</div>
        </section>

        <section class="panel span-2">
            <header class="panel-header">
                <div>
                    <h2>Портфель как у Snowball</h2>
                    <p>Структура по типам + сплит по валютам</p>
                </div>
                <button class="btn ghost" id="refreshPortfolio">Обновить</button>
            </header>
            <div class="portfolio-grid">
                <div>
                    <h3>Типы активов</h3>
                    <ul id="structureList" class="stat-list empty"></ul>
                </div>
                <div>
                    <h3>Активы по валютам</h3>
                    <div id="assetsByCurrency" class="currency-grid empty"></div>
                </div>
            </div>
        </section>

        <section class="panel">
            <header>
                <h2>Дивиденды и купоны</h2>
                <p>Отслеживай пассивный доход</p>
            </header>
            <ul id="dividendsList" class="stat-list empty">Загружается…</ul>
        </section>

        <section class="panel">
            <header>
                <h2>Рекомендации по ребалансу</h2>
                <p>Сравнение с целевой моделью 60/30/10</p>
            </header>
            <div id="rebalanceList" class="rebalance-list empty">Нет данных</div>
        </section>

        <section class="panel span-2">
            <header class="panel-header">
                <div>
                    <h2>Интеграция с Т‑Инвестициями</h2>
                    <p>Синхронизируй сделки автоматически</p>
                </div>
                <button id="syncTinkoff" class="btn primary">Синхронизировать</button>
            </header>
            <form id="tinkoffForm" class="form-card">
                <label>API токен
                    <input name="token" placeholder="t.your-token..." required>
                </label>
                <label>Брокерский аккаунт (опционально)
                    <input name="accountId" placeholder="1234567890">
                </label>
                <label>Режим
                    <select name="mode">
                        <option value="HISTORY">История сделок</option>
                        <option value="POSITIONS">Текущие позиции</option>
                        <option value="DIVIDENDS">Дивиденды</option>
                    </select>
                </label>
                <button class="btn secondary full">Отправить</button>
                <p class="hint" id="tinkoffResult">Мы никогда не сохраняем токен открытым текстом.</p>
            </form>
        </section>
    </main>

    <footer>
        <p>BudgetFlow Tracker · Snowball inspired dashboard · 2025</p>
    </footer>
</div>

<div id="toast" class="toast"></div>
<script src="app.js" defer></script>
</body>
</html>

